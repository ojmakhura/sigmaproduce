
include ./Makefile.constants

COMMON_LOCAL_VARS = "export EMAIL=${TEST_EMAIL}"\
    "export STACK_NAME=${STACK_NAME}"\
    "export SIGMA_PRODUCE_PGADMIN_ADDRESS=${SIGMA_PRODUCE_PGADMIN_ADDRESS}"\
    "export SIGMA_PRODUCE_DB_ADDRESS=${SIGMA_PRODUCE_DB_ADDRESS}"\
    "export SIGMA_PRODUCE_API_ADDRESS=${SIGMA_PRODUCE_API_ADDRESS}"\
    "export SIGMA_PRODUCE_COMM_ADDRESS=${SIGMA_PRODUCE_COMM_ADDRESS}"\
    "export ACME_STORAGE=${ACME_STORAGE}"\
    "export TRAEFIK_PUBLIC_NETWORK=${TRAEFIK_PUBLIC_NETWORK}"\
    "export TRAEFIK_TAG=${TRAEFIK_TAG}"\
    "export TRAEFIK_PUBLIC_TAG=${TRAEFIK_PUBLIC_TAG}"\
    "export TRAEFIK_USER=${TRAEFIK_USER}"\
    "export TRAEFIK_PASSWORD=${TRAEFIK_PASSWORD}"\
    "export SIGMA_PRODUCE_WEB_ADDRESS=${SIGMA_PRODUCE_WEB_ADDRESS}"\
    "export POSTGRES_SERVER=${SIGMA_PRODUCE_DB_ADDRESS}"\
    "export POSTGRES_SERVER_PORT=${POSTGRES_SERVER_PORT}"\
    "export POSTGRES_USER=${POSTGRES_USER}"\
    "export POSTGRES_PASSWORD=${POSTGRES_PASSWORD}"\
    "export POSTGRES_USER_PASSWORD=${POSTGRES_USER_PASSWORD}"\
    "export POSTGRES_DB=${POSTGRES_DB}"\
    "export PGADMIN_LISTEN_PORT=${PGADMIN_LISTEN_PORT}"\
    "export PGADMIN_DEFAULT_EMAIL=${PGADMIN_DEFAULT_EMAIL}"\
    "export PGADMIN_DEFAULT_PASSWORD=${PGADMIN_DEFAULT_PASSWORD}"\
    "export KEYCLOAK_WEB_CLIENT_ID=17b28a77-1d2e-4e91-8a22-ff6db44108e5"\
    "export KEYCLOAK_DB=${KEYCLOAK_DB}"\
    "export KEYCLOAK_USER=${KEYCLOAK_USER}"\
    "export KEYCLOAK_PASSWORD=${KEYCLOAK_PASSWORD}"\
    "export KEYCLOAK_REALM=${KEYCLOAK_REALM}"\
    "export KEYCLOAK_SERVER_PORT=${KEYCLOAK_SERVER_PORT}"\
    "export KEYCLOAK_PUBLIC_PORT=${KEYCLOAK_PUBLIC_PORT}"\
    "export WEB_DEV_SERVER_PORT=${WEB_DEV_SERVER_PORT}"\
    "export API_SERVER_PORT=${API_SERVER_PORT}"\
    "export API_SERVER=${API_SERVER}"\
    "export COMM_SERVER_PORT=${COMM_SERVER_PORT}"\
    "export COMM_SERVER=${COMM_SERVER}"\
    "export CRON_SERVER_PORT=${CRON_SERVER_PORT}"\
    "export CRON_SERVER=${CRON_SERVER}"\
    "export KEYCLOAK_MAIN_CLIENT=${KEYCLOAK_MAIN_CLIENT}"\
    "export KEYCLOAK_API_CLIENT=${KEYCLOAK_API_CLIENT}"\
    "export KEYCLOAK_COMM_CLIENT=${KEYCLOAK_COMM_CLIENT}"\
    "export KEYCLOAK_CRON_CLIENT=${KEYCLOAK_CRON_CLIENT}"\
    "export KEYCLOAK_WEB_CLIENT=${KEYCLOAK_WEB_CLIENT}"\
    "export SIGMA_PRODUCE_REGISTRY_ADDRESS=${SIGMA_PRODUCE_REGISTRY_ADDRESS}"\
    "export REGISTRY_HTTP_TLS_CERTIFICATE=${REGISTRY_HTTP_TLS_CERTIFICATE}"\
    "export REGISTRY_HTTP_TLS_KEY=${REGISTRY_HTTP_TLS_KEY}"\
    "export REGISTRY_AUTH=${REGISTRY_AUTH}"\
    "export REGISTRY_AUTH_HTPASSWD_PATH=${REGISTRY_AUTH_HTPASSWD_PATH}"\
    "export REGISTRY_AUTH_HTPASSWD_REALM=${REGISTRY_AUTH_HTPASSWD_REALM}"\
    "export SIGMA_PRODUCE_JENKINS_ADDRESS=${SIGMA_PRODUCE_JENKINS_ADDRESS}"\
    "export SIGMA_PRODUCE_JENKINS_SUBDOMAIN=${SIGMA_PRODUCE_JENKINS_SUBDOMAIN}"\
    "export WEBSECURE_ENTRY=${SECURE_ROUTER_ENTRY}"\
    "export WEB_ENTRY=${INSECURE_ROUTER_ENTRY}"\
    "export WEB_IMAGE_NAME=${WEB_IMAGE_NAME}"\
    "export API_IMAGE_NAME=${API_IMAGE_NAME}"\
    "export COMM_IMAGE_NAME=${COMM_IMAGE_NAME}"\
    "export KEYCLOAK_IMAGE_NAME=${KEYCLOAK_IMAGE_NAME}"\
    "export SIGMA_PRODUCE_REGISTRY_SUBDOMAIN=${SIGMA_PRODUCE_REGISTRY_SUBDOMAIN}"\
    "export ACTIVE_ROUTER_ENTRY=${SECURE_ROUTER_ENTRY}"\
    "export RABBITMQ_DEFAULT_USER=${RABBITMQ_DEFAULT_USER}"\
    "export RABBITMQ_DEFAULT_PASS=${RABBITMQ_DEFAULT_PASS}"\
    "export SIGMA_PRODUCE_RABBIT_ADDRESS=${SIGMA_PRODUCE_RABBIT_ADDRESS}"\
    "export RABBITMQ_HOST=${RABBITMQ_HOST}"\
    "export RABBITMQ_WEB_PORT=${RABBITMQ_WEB_PORT}"\
    "export RABBITMQ_SERVICE_PORT=${RABBITMQ_SERVICE_PORT}"\
    "export CRON_IMAGE_NAME=${CRON_IMAGE_NAME}"\
    "export CRON_DB=${CRON_DB}"\
    "export TRAEFIK_USERNAME=${TRAEFIK_USERNAME}"\
    "export SIGMA_PRODUCE_COMPLAINT_ROLES=${SIGMA_PRODUCE_COMPLAINT_ROLES}"\
    "export SIGMA_PRODUCE_COMPLAINT_EMAILS=${SIGMA_PRODUCE_COMPLAINT_EMAILS}"\
    "export COMPLAINTS_COMPLAINANT_KEY=${COMPLAINTS_COMPLAINANT_KEY}"\
    "export COMPLAINTS_SIGMA_PRODUCE_KEY=${COMPLAINTS_SIGMA_PRODUCE_KEY}"\
    "export COMPLAINTS_REPLY_KEY=${COMPLAINTS_REPLY_KEY}"\
    "export ACTIVATION_SUBMISSION_KEY=${ACTIVATION_SUBMISSION_KEY}"\
    "export FORM_SUBMISSION_RETURN_KEY=${FORM_SUBMISSION_RETURN_KEY}"\
    "export COMPLAINTS_USER_ASSIGNMENT_KEY=${COMPLAINTS_USER_ASSIGNMENT_KEY}"\
    "export FORM_SUBMISSION_UPLOAD_KEY=${FORM_SUBMISSION_UPLOAD_KEY}"\
    
LOCAL_ENV = printf "%s\n" \
	"\#!/bin/sh"\
    ${COMMON_LOCAL_VARS}\
    "export SIGMA_PRODUCE_DATA=${HOME}${SIGMA_PRODUCE_DATA}"\
    "export IMAGE_VERSION=${IMAGE_VERSION}"\
    "export DOMAIN=${LOCAL_DOMAIN}"\
    "export DB_DOMAIN=${SIGMA_PRODUCE_DB_SUBDOMAIN}.${LOCAL_DOMAIN}"\
    "export PGADMIN_DOMAIN=${SIGMA_PRODUCE_PGADMIN_SUBDOMAIN}.${LOCAL_DOMAIN}"\
    "export PROXY_DOMAIN=${SIGMA_PRODUCE_PROXY_SUBDOMAIN}.${LOCAL_DOMAIN}"\
    "export API_DOMAIN=${SIGMA_PRODUCE_API_SUBDOMAIN}.${LOCAL_DOMAIN}"\
    "export WEB_DOMAIN=${SIGMA_PRODUCE_WEB_SUBDOMAIN}.${LOCAL_DOMAIN}"\
    "export KEYCLOAK_DOMAIN=${SIGMA_PRODUCE_KEYCLOAK_SUBDOMAIN}.${LOCAL_DOMAIN}"\
    "export REGISTRY_DOMAIN=${SIGMA_PRODUCE_REGISTRY_SUBDOMAIN}.${LOCAL_DOMAIN}"\
    "export JENKINS_DOMAIN=${SIGMA_PRODUCE_JENKINS_SUBDOMAIN}.${LOCAL_DOMAIN}"\
    "export RABBITMQ_DOMAIN=${SIGMA_PRODUCE_RABBITMQ_SUBDOMAIN}.${LOCAL_DOMAIN}"\
    "export PORTAINER_DOMAIN=${SIGMA_PRODUCE_PORTAINER_SUBDOMAIN}.${LOCAL_DOMAIN}"\
    "export PROMETHEUS_DOMAIN=${SIGMA_PRODUCE_PROMETHEUS_SUBDOMAIN}.${LOCAL_DOMAIN}"\
    "export GRAFANA_DOMAIN=${SIGMA_PRODUCE_GRAFANA_SUBDOMAIN}.${LOCAL_DOMAIN}"\
    "export REDIRECT_URI=${LOCAL_REDIRECT_URI}"\
    "export SMTP_HOST=${LOCAL_SMTP_HOST}"\
    "export SIGMA_PRODUCE_KEYCLOAK_ADDRESS=${SIGMA_PRODUCE_KEYCLOAK_ADDRESS}"\
    "export KEYCLOAK_AUTH_URL=${KEYCLOAK_LOCAL_BASE_URL}"\
    "export ACME_EMAIL=${LOCAL_ACME_EMAIL}"\
    "export WEB_URL=${LOCAL_WEB_URL}"\
    "export API_URL=${LOCAL_API_URL}"\
    "export COMM_URL=${LOCAL_COMM_URL}"\
    "export CRON_URL=${LOCAL_CRON_URL}"\
    "export CERT=${LOCAL_CERT}"\
    "export CERT_PASSWORD=${LOCAL_CERT_PASSWORD}"\
    "export SSL_SECURE=true"\
    "export IMAGE_VERSION_SUFFIX=-lc"\
    "export API_LOG_LEVEL=INFO"\
    "export COMM_LOG_LEVEL=INFO"\
    "export CRON_LOG_LEVEL=INFO"\
    "export REGISTRY_TAG=${SIGMA_PRODUCE_REGISTRY_SUBDOMAIN}.${LOCAL_DOMAIN}"\
    "export KEYCLOAK_REGISTRY_IMAGE=${KEYCLOAK_LOCAL_REGISTRY_IMAGE}"\
    "export POSTGRES_SERVER=${LOCAL_DB_URL}"\
    >> .env

DEV_ENV = printf "%s\n" \
	"\#!/bin/sh"\
    ${COMMON_LOCAL_VARS}\
    "export SIGMA_PRODUCE_DATA=${SIGMA_PRODUCE_DATA}"\
    "export IMAGE_VERSION=${IMAGE_VERSION}"\
    "export DOMAIN=${DEV_DOMAIN}"\
    "export DB_DOMAIN=${SIGMA_PRODUCE_DB_SUBDOMAIN}.${DEV_DOMAIN}"\
    "export PGADMIN_DOMAIN=${SIGMA_PRODUCE_PGADMIN_SUBDOMAIN}.${DEV_DOMAIN}"\
    "export PROXY_DOMAIN=${SIGMA_PRODUCE_PROXY_SUBDOMAIN}.${DEV_DOMAIN}"\
    "export API_DOMAIN=${SIGMA_PRODUCE_API_SUBDOMAIN}.${DEV_DOMAIN}"\
    "export COMM_DOMAIN=${SIGMA_PRODUCE_COMM_SUBDOMAIN}.${DEV_DOMAIN}"\
    "export CRON_DOMAIN=${SIGMA_PRODUCE_CRON_SUBDOMAIN}.${DEV_DOMAIN}"\
    "export WEB_DOMAIN=${DEV_DOMAIN}"\
    "export KEYCLOAK_DOMAIN=${SIGMA_PRODUCE_KEYCLOAK_SUBDOMAIN}.${DEV_DOMAIN}"\
    "export REGISTRY_DOMAIN=${SIGMA_PRODUCE_REGISTRY_SUBDOMAIN}.${DEV_DOMAIN}"\
    "export JENKINS_DOMAIN=${SIGMA_PRODUCE_JENKINS_SUBDOMAIN}.${DEV_DOMAIN}"\
    "export RABBITMQ_DOMAIN=${SIGMA_PRODUCE_RABBITMQ_SUBDOMAIN}.${DEV_DOMAIN}"\
    "export PORTAINER_DOMAIN=${SIGMA_PRODUCE_PORTAINER_SUBDOMAIN}.${DEV_DOMAIN}"\
    "export PROMETHEUS_DOMAIN=${SIGMA_PRODUCE_PROMETHEUS_SUBDOMAIN}.${DEV_DOMAIN}"\
    "export REDIRECT_URI=https://${DEV_DOMAIN}"\
    "export SMTP_HOST=${DEV_SMTP_HOST}"\
    "export SIGMA_PRODUCE_KEYCLOAK_ADDRESS=${SIGMA_PRODUCE_KEYCLOAK_ADDRESS}"\
    "export KEYCLOAK_AUTH_URL=${KEYCLOAK_DEV_BASE_URL}"\
    "export ACME_EMAIL=${DEV_ACME_EMAIL}"\
    "export WEB_DEV_SERVER_PORT=${WEB_DEV_SERVER_PORT}"\
    "export WEB_URL=${DEV_WEB_URL}"\
    "export WEB_PUBLIC_PORT=${WEB_DEV_SERVER_PORT}"\
    "export DEV_SERVER_ADDRESS=${DEV_SERVER_ADDRESS}"\
    "export API_URL=${DEV_API_URL}"\
    "export COMM_URL=${DEV_COMM_URL}"\
    "export CRON_URL=${DEV_CRON_URL}"\
    "export SSL_SECURE=true"\
    "export CERT=STAR_csdev_roguesystems_co_bw"\
    "export CERT_PASSWORD=changeit"\
    "export API_LOG_LEVEL=DEBUG"\
    "export COMM_LOG_LEVEL=DEBUG"\
    "export CRON_LOG_LEVEL=DEBUG"\
    "export IMAGE_VERSION_SUFFIX=-dev"\
    "export REGISTRY_TAG=${SIGMA_PRODUCE_REGISTRY_SUBDOMAIN}.${DEV_DOMAIN}"\
    "export KEYCLOAK_REGISTRY_IMAGE=${KEYCLOAK_DEV_REGISTRY_IMAGE}"\
    "export POSTGRES_SERVER=${DEV_DB_URL}"\
    >> .env

TEST_ENV = printf "%s\n" \
	"\#!/bin/sh"\
    ${COMMON_LOCAL_VARS}\
    "export SIGMA_PRODUCE_DATA=${SIGMA_PRODUCE_DATA}"\
    "export IMAGE_VERSION=${IMAGE_VERSION}"\
    "export DOMAIN=${TEST_DOMAIN}"\
    "export DB_DOMAIN=opqa-${SIGMA_PRODUCE_DB_SUBDOMAIN}.${TEST_DOMAIN}"\
    "export PGADMIN_DOMAIN=opqa-${SIGMA_PRODUCE_DB_SUBDOMAIN}.${TEST_DOMAIN}"\
    "export PROXY_DOMAIN=opqa-${SIGMA_PRODUCE_PROXY_SUBDOMAIN}.${TEST_DOMAIN}"\
    "export API_DOMAIN=opqa-${SIGMA_PRODUCE_API_SUBDOMAIN}.${TEST_DOMAIN}"\
    "export COMM_DOMAIN=opqa-${SIGMA_PRODUCE_COMM_SUBDOMAIN}.${TEST_DOMAIN}"\
    "export CRON_DOMAIN=opqa-${SIGMA_PRODUCE_CRON_SUBDOMAIN}.${TEST_DOMAIN}"\
    "export WEB_DOMAIN=opqa-web.${TEST_DOMAIN}"\
    "export KEYCLOAK_DOMAIN=opqa-${SIGMA_PRODUCE_KEYCLOAK_SUBDOMAIN}.${TEST_DOMAIN}"\
    "export REGISTRY_DOMAIN=opqa-${SIGMA_PRODUCE_REGISTRY_SUBDOMAIN}.${TEST_DOMAIN}"\
    "export JENKINS_DOMAIN=opqa-${SIGMA_PRODUCE_JENKINS_SUBDOMAIN}.${TEST_DOMAIN}"\
    "export GRAFANA_DOMAIN=opqa-${SIGMA_PRODUCE_GRAFANA_SUBDOMAIN}.${TEST_DOMAIN}"\
    "export KIBANA_DOMAIN=opqa-${SIGMA_PRODUCE_KIBANA_SUBDOMAIN}.${TEST_DOMAIN}"\
    "export PORTAINER_DOMAIN=opqa-${SIGMA_PRODUCE_PORTAINER_SUBDOMAIN}.${TEST_DOMAIN}"\
    "export PROMETHEUS_DOMAIN=opqa-${SIGMA_PRODUCE_PROMETHEUS_SUBDOMAIN}.${TEST_DOMAIN}"\
    "export RABBITMQ_DOMAIN=opqa-${SIGMA_PRODUCE_RABBITMQ_SUBDOMAIN}.${TEST_DOMAIN}"\
    "export UNSEE_DOMAIN=opqa-unsee.${TEST_DOMAIN}"\
    "export ALERTMANAGER_DOMAIN=opqa-alertmanager.${TEST_DOMAIN}"\
    "export REDIRECT_URI=opqa-web.${TEST_DOMAIN}"\
    "export SMTP_HOST=${TEST_SMTP_HOST}"\
    "export SIGMA_PRODUCE_KEYCLOAK_ADDRESS=${SIGMA_PRODUCE_KEYCLOAK_TEST_ADDRESS}"\
    "export KEYCLOAK_AUTH_URL=${KEYCLOAK_TEST_BASE_URL}"\
    "export ACME_EMAIL=${TEST_ACME_EMAIL}"\
    "export WEB_URL=https://opqa-${SIGMA_PRODUCE_WEB_SUBDOMAIN}.${TEST_DOMAIN}"\
    "export API_URL=${TEST_API_URL}"\
    "export COMM_URL=${TEST_COMM_URL}"\
    "export CRON_URL=${TEST_CRON_URL}"\
    "export SSL_SECURE=true"\
    "export CERT=sigmaproduce_co_bw"\
    "export CERT_PASSWORD=changeit"\
    "export API_LOG_LEVEL=DEBUG"\
    "export COMM_LOG_LEVEL=DEBUG"\
    "export CRON_LOG_LEVEL=DEBUG"\
    "export IMAGE_VERSION_SUFFIX=-test"\
    "export VERSION=${VERSION}"\
    "export REGISTRY_TAG=opqa-${SIGMA_PRODUCE_REGISTRY_SUBDOMAIN}.${TEST_DOMAIN}"\
    "export KEYCLOAK_REGISTRY_IMAGE=${KEYCLOAK_TEST_REGISTRY_IMAGE}"\
    "export KEYCLOAK_WEB_CLIENT_ID=17b28a77-1d2e-4e91-8a22-ff6db44108e5"\
    "export POSTGRES_SERVER=${TEST_DB_URL}"\
    >> .env

LIVE_ENV = printf "%s\n" \
	"\#!/bin/sh"\
    ${COMMON_LOCAL_VARS}\
    "export SIGMA_PRODUCE_DATA=${SIGMA_PRODUCE_DATA}"\
    "export IMAGE_VERSION=${IMAGE_VERSION}"\
    "export DOMAIN=${LIVE_DOMAIN}"\
    "export DB_DOMAIN=op-${SIGMA_PRODUCE_DB_SUBDOMAIN}.${LIVE_DOMAIN}"\
    "export PGADMIN_DOMAIN=op-${SIGMA_PRODUCE_PGADMIN_SUBDOMAIN}.${LIVE_DOMAIN}"\
    "export PROXY_DOMAIN=op-${SIGMA_PRODUCE_PROXY_SUBDOMAIN}.${LIVE_DOMAIN}"\
    "export API_DOMAIN=op-${SIGMA_PRODUCE_API_SUBDOMAIN}.${LIVE_DOMAIN}"\
    "export COMM_DOMAIN=op-${SIGMA_PRODUCE_COMM_SUBDOMAIN}.${LIVE_DOMAIN}"\
    "export WEB_DOMAIN=op-${SIGMA_PRODUCE_WEB_SUBDOMAIN}.${LIVE_DOMAIN}"\
    "export KEYCLOAK_DOMAIN=op-${SIGMA_PRODUCE_KEYCLOAK_SUBDOMAIN}.${LIVE_DOMAIN}"\
    "export REGISTRY_DOMAIN=op-${SIGMA_PRODUCE_REGISTRY_SUBDOMAIN}.${LIVE_DOMAIN}"\
    "export JENKINS_DOMAIN=op-${SIGMA_PRODUCE_JENKINS_SUBDOMAIN}.${LIVE_DOMAIN}"\
    "export RABBITMQ_DOMAIN=op-${SIGMA_PRODUCE_RABBITMQ_SUBDOMAIN}.${LIVE_DOMAIN}"\
    "export REDIRECT_URI=https://op-web.${LIVE_DOMAIN}"\
    "export SMTP_HOST=${LIVE_SMTP_HOST}"\
    "export SIGMA_PRODUCE_KEYCLOAK_ADDRESS=${SIGMA_PRODUCE_KEYCLOAK_LIVE_ADDRESS}"\
    "export KEYCLOAK_AUTH_URL=${KEYCLOAK_LIVE_BASE_URL}"\
    "export ACME_EMAIL=${LIVE_ACME_EMAIL}"\
    "export WEB_URL=${LIVE_WEB_URL}"\
    "export API_URL=${LIVE_API_URL}"\
    "export COMM_URL=${LIVE_COMM_URL}"\
    "export SSL_SECURE=true"\
    "export CERT=sigmaproduce_co_bw"\
    "export CERT_PASSWORD=changeit"\
    "export IMAGE_VERSION_SUFFIX="\
    "export API_LOG_LEVEL=ERROR"\
    "export COMM_LOG_LEVEL=ERROR"\
    "export CRON_LOG_LEVEL=ERROR"\
    "export REGISTRY_TAG=op-${SIGMA_PRODUCE_REGISTRY_SUBDOMAIN}.${LIVE_DOMAIN}"\
    "export KEYCLOAK_REGISTRY_IMAGE=${KEYCLOAK_LIVE_REGISTRY_IMAGE}"\
    "export POSTGRES_SERVER=${LIVE_DB_URL}"\
    >> .env
